
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as G}from"./index-143255d0.js";import{_ as H}from"./index.vue_vue_type_script_setup_true_name_SvgIcon_lang-dfa84782.js";import{v as y,w as J,b as O}from"./runtime-dom.esm-bundler-1ceaee55.js";import{b0 as Q}from"./user-2b228075.js";import{b as W,u as X}from"./vue-router-8228f7a0.js";import{j as P,r as n,a3 as _,k as Y,l as Z,m as r,u as t,z as R,E as e,y as o,D as ee,C as f,af as oe,ag as te}from"./runtime-core.esm-bundler-a63aef9e.js";import{b as q}from"./route-block-83d24a4e.js";import{_ as le}from"./_plugin-vue_export-helper-c27b6911.js";import"./settings-58b03ff3.js";import"./index-c228ae8f.js";import"./index-e71fcdfa.js";import"./index-74c80a46.js";const h=g=>(oe("data-v-ae91adce"),g=g(),te(),g),ae=h(()=>r("div",{class:"bg-banner"},null,-1)),re={id:"login-box"},se={class:"login-banner"},ne=h(()=>r("div",{class:"logo"},null,-1)),ue=["src"],de={class:"title-container"},ce={class:"title"},ie={class:"flex-bar"},pe=h(()=>r("div",{class:"title-container"},[r("h3",{class:"title"}," 探索从这里开始! 🚀 ")],-1)),me=h(()=>r("div",{class:"title-container"},[r("h3",{class:"title"}," 忘记密码了? 🔒 ")],-1)),_e={class:"sub-link"},fe=P({name:"Login"}),C=P({...fe,setup(g){var U;const F=W(),I=X(),L=Q(),B=new URL(""+new URL("login-banner-dd9ea531.png",import.meta.url).href,self.location).href,D="CodeReview系统",w=n("login"),b=n(!1),E=n(((U=F.query.redirect)==null?void 0:U.toString())??"/"),v=n(),u=n({account:localStorage.login_account||"",password:"",remember:!!localStorage.login_account}),K=n({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});function S(){v.value&&v.value.validate(V=>{V&&(b.value=!0,L.login(u.value).then(()=>{b.value=!1,u.value.remember?localStorage.setItem("login_account",u.value.account):localStorage.removeItem("login_account"),I.push(E.value)}).catch(()=>{b.value=!1}))})}const N=n(),d=n({account:"",captcha:"",password:"",checkPassword:""}),z=n({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkPassword:[{required:!0,trigger:"blur",message:"请再次输入密码"},{validator:(V,l,s)=>{l!==d.value.password?s(new Error("两次输入的密码不一致")):s()}}]}),T=n(),m=n({account:localStorage.login_account||"",captcha:"",newPassword:""}),$=n({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],newPassword:[{required:!0,trigger:"blur",message:"请输入新密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});return(V,l)=>{const s=H,c=_("el-icon"),i=_("el-input"),p=_("el-form-item"),j=_("el-checkbox"),x=_("el-button"),k=_("el-form"),M=_("el-link"),A=G;return Y(),Z("div",null,[ae,r("div",re,[r("div",se,[ne,r("img",{src:t(B),class:"banner"},null,8,ue)]),R(e(k,{ref_key:"loginFormRef",ref:v,model:t(u),rules:t(K),class:"login-form",autocomplete:"on"},{default:o(()=>[r("div",de,[r("h3",ce," 欢迎来到 "+ee(t(D))+" ! 👋🏻 ",1)]),r("div",null,[e(p,{prop:"account"},{default:o(()=>[e(i,{modelValue:t(u).account,"onUpdate:modelValue":l[0]||(l[0]=a=>t(u).account=a),placeholder:"用户名",text:"",tabindex:"1",autocomplete:"on"},{prefix:o(()=>[e(c,null,{default:o(()=>[e(s,{name:"ep:user"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(p,{prop:"password"},{default:o(()=>[e(i,{modelValue:t(u).password,"onUpdate:modelValue":l[1]||(l[1]=a=>t(u).password=a),type:"password",placeholder:"密码",tabindex:"2",autocomplete:"on","show-password":"",onKeyup:J(S,["enter"])},{prefix:o(()=>[e(c,null,{default:o(()=>[e(s,{name:"ep:lock"})]),_:1})]),_:1},8,["modelValue","onKeyup"])]),_:1})]),r("div",ie,[e(j,{modelValue:t(u).remember,"onUpdate:modelValue":l[2]||(l[2]=a=>t(u).remember=a)},{default:o(()=>[f(" 记住我 ")]),_:1},8,["modelValue"])]),e(x,{loading:t(b),type:"primary",size:"large",style:{width:"100%"},onClick:O(S,["prevent"])},{default:o(()=>[f(" 登录 ")]),_:1},8,["loading","onClick"])]),_:1},8,["model","rules"]),[[y,t(w)==="login"]]),R(e(k,{ref_key:"registerFormRef",ref:N,model:t(d),rules:t(z),class:"login-form","auto-complete":"on"},{default:o(()=>[pe,r("div",null,[e(p,{prop:"account"},{default:o(()=>[e(i,{modelValue:t(d).account,"onUpdate:modelValue":l[3]||(l[3]=a=>t(d).account=a),placeholder:"用户名",tabindex:"1",autocomplete:"on"},{prefix:o(()=>[e(c,null,{default:o(()=>[e(s,{name:"ep:user"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(p,{prop:"captcha"},{default:o(()=>[e(i,{ref:"captcha",modelValue:t(d).captcha,"onUpdate:modelValue":l[4]||(l[4]=a=>t(d).captcha=a),placeholder:"验证码",tabindex:"2",autocomplete:"on"},{prefix:o(()=>[e(c,null,{default:o(()=>[e(s,{name:"ep:key"})]),_:1})]),append:o(()=>[e(x,null,{default:o(()=>[f("发送验证码")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(p,{prop:"password"},{default:o(()=>[e(i,{modelValue:t(d).password,"onUpdate:modelValue":l[5]||(l[5]=a=>t(d).password=a),type:"password",placeholder:"密码",tabindex:"3",autocomplete:"on","show-password":""},{prefix:o(()=>[e(c,null,{default:o(()=>[e(s,{name:"ep:lock"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(p,{prop:"checkPassword"},{default:o(()=>[e(i,{modelValue:t(d).checkPassword,"onUpdate:modelValue":l[6]||(l[6]=a=>t(d).checkPassword=a),type:"password",placeholder:"确认密码",tabindex:"4",autocomplete:"on","show-password":""},{prefix:o(()=>[e(c,null,{default:o(()=>[e(s,{name:"ep:lock"})]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1},8,["model","rules"]),[[y,t(w)==="register"]]),R(e(k,{ref_key:"resetFormRef",ref:T,model:t(m),rules:t($),class:"login-form","auto-complete":"on"},{default:o(()=>[me,r("div",null,[e(p,{prop:"account"},{default:o(()=>[e(i,{modelValue:t(m).account,"onUpdate:modelValue":l[7]||(l[7]=a=>t(m).account=a),placeholder:"用户名",tabindex:"1",autocomplete:"on"},{prefix:o(()=>[e(c,null,{default:o(()=>[e(s,{name:"ep:user"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(p,{prop:"captcha"},{default:o(()=>[e(i,{ref:"captcha",modelValue:t(m).captcha,"onUpdate:modelValue":l[8]||(l[8]=a=>t(m).captcha=a),placeholder:"验证码",tabindex:"2",autocomplete:"on"},{prefix:o(()=>[e(c,null,{default:o(()=>[e(s,{name:"ep:key"})]),_:1})]),append:o(()=>[e(x,null,{default:o(()=>[f("发送验证码")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(p,{prop:"newPassword"},{default:o(()=>[e(i,{modelValue:t(m).newPassword,"onUpdate:modelValue":l[9]||(l[9]=a=>t(m).newPassword=a),type:"password",placeholder:"新密码",tabindex:"3",autocomplete:"on","show-password":""},{prefix:o(()=>[e(c,null,{default:o(()=>[e(s,{name:"ep:lock"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),r("div",_e,[e(M,{type:"primary",underline:!1,onClick:l[10]||(l[10]=a=>w.value="login")},{default:o(()=>[f(" 返回登录 ")]),_:1})])]),_:1},8,["model","rules"]),[[y,t(w)==="reset"]])]),e(A)])}}});typeof q=="function"&&q(C);const qe=le(C,[["__scopeId","data-v-ae91adce"]]);export{qe as default};
//# sourceMappingURL=login-e7472feb.js.map
