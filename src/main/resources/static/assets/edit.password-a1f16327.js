
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{j as _,r as m,o as S,a0 as U,k as h,l as b,n as B,q as P,u as s,a3 as a,E as e,y as t,C as R}from"./runtime-core.esm-bundler-a63aef9e.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as $}from"./index-74c80a46.js";import{a as M}from"./index-e71fcdfa.js";import{b0 as z,a$ as L}from"./user-2b228075.js";import{b as N,u as j}from"./vue-router-8228f7a0.js";import{b as g}from"./route-block-83d24a4e.js";import"./index.vue_vue_type_script_setup_true_name_SvgIcon_lang-dfa84782.js";import"./settings-58b03ff3.js";import"./index-c228ae8f.js";import"./runtime-dom.esm-bundler-1ceaee55.js";const A=_({name:"FixedActionBar"}),F=_({...A,setup(v){const p=m(!1);S(()=>{d(),window.addEventListener("scroll",d)}),U(()=>{window.removeEventListener("scroll",d)});function d(){const r=document.documentElement.scrollTop||document.body.scrollTop,l=document.documentElement.clientHeight||document.body.clientHeight,o=document.documentElement.scrollHeight||document.body.scrollHeight;p.value=Math.ceil(r+l)>=o}return(r,l)=>(h(),b("div",{class:P(["actionbar",{shadow:!s(p)}]),"data-fixed-calc-width":""},[B(r.$slots,"default",{},void 0,!0)],2))}});const I=T(F,[["__scopeId","data-v-4af3e54d"]]),D=_({name:"PersonalEditPassword"}),G=_({...D,setup(v){const p=N(),d=j(),r=z(),l=m(),o=m({password:"",newpassword:"",checkpassword:""}),y=m({password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:(i,n,c)=>{n!==o.value.newpassword?c(new Error("请确认新密码")):c()}}]});function x(){l.value&&l.value.validate(i=>{i&&r.editPassword(o.value).then(()=>{L({type:"success",message:"密码修改成功，请重新登录"}),r.logout().then(()=>{d.push({name:"login",query:{redirect:p.fullPath}})})})})}return(i,n)=>{const c=M,f=a("el-input"),w=a("el-form-item"),V=a("el-form"),k=a("el-col"),E=a("el-row"),C=$,H=a("el-button"),q=I;return h(),b("div",null,[e(c,{title:"修改密码",content:"定期修改密码可以提高帐号安全性噢~"}),e(C,null,{default:t(()=>[e(E,null,{default:t(()=>[e(k,{md:24,lg:12},{default:t(()=>[e(V,{ref_key:"formRef",ref:l,model:s(o),rules:s(y),"label-width":"120px"},{default:t(()=>[e(w,{label:"原密码",prop:"password"},{default:t(()=>[e(f,{modelValue:s(o).password,"onUpdate:modelValue":n[0]||(n[0]=u=>s(o).password=u),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1}),e(w,{label:"新密码",prop:"newpassword"},{default:t(()=>[e(f,{modelValue:s(o).newpassword,"onUpdate:modelValue":n[1]||(n[1]=u=>s(o).newpassword=u),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1}),e(w,{label:"确认新密码",prop:"checkpassword"},{default:t(()=>[e(f,{modelValue:s(o).checkpassword,"onUpdate:modelValue":n[2]||(n[2]=u=>s(o).checkpassword=u),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1}),e(q,null,{default:t(()=>[e(H,{type:"primary",size:"large",onClick:x},{default:t(()=>[R(" 提交 ")]),_:1})]),_:1})])}}});typeof g=="function"&&g(G);export{G as default};
//# sourceMappingURL=edit.password-a1f16327.js.map
