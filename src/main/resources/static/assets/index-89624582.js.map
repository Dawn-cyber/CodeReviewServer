{"version":3,"file":"index-89624582.js","sources":["../../src/layouts/components/AppSetting/index.vue"],"sourcesContent":["<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'AppSetting',\n})\n</script>\n<script lang=\"ts\" setup name=\"AppSetting\">\r\nimport { useClipboard } from '@vueuse/core'\r\nimport { ElMessage } from 'element-plus'\r\nimport eventBus from '@/utils/eventBus'\r\nimport useSettingsStore from '@/store/modules/settings'\r\nimport useMenuStore from '@/store/modules/menu'\r\n\r\nconst route = useRoute()\r\n\r\nconst settingsStore = useSettingsStore()\r\nconst menuStore = useMenuStore()\r\n\r\nconst isShow = ref(false)\r\n\r\nwatch(() => settingsStore.settings.menu.menuMode, (value) => {\r\n  if (value === 'single') {\r\n    menuStore.setActived(0)\r\n  }\r\n  else {\r\n    menuStore.setActived(route.fullPath)\r\n  }\r\n})\r\n\r\nonMounted(() => {\r\n  eventBus.on('global-theme-toggle', () => {\r\n    isShow.value = !isShow.value\r\n  })\r\n})\r\n\r\nconst { copy, copied, isSupported } = useClipboard()\r\n\r\nwatch(copied, (val) => {\r\n  if (val) {\r\n    ElMessage.success('复制成功，请粘贴到 src/settings.ts 文件中！')\r\n  }\r\n})\r\n\r\nfunction handleCopy() {\r\n  copy(JSON.stringify(settingsStore.settings, null, 2))\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <el-drawer v-model=\"isShow\" title=\"应用配置\" direction=\"rtl\" :size=\"360\">\r\n      <el-alert title=\"应用配置可实时预览效果，但只是临时生效，要想真正作用于项目，可以点击下方的“复制配置”按钮，并将配置粘贴到 src/settings.ts 文件中。同时建议在生产环境隐藏应用配置功能。\" type=\"error\" :closable=\"false\" />\r\n      <el-divider>颜色主题</el-divider>\r\n      <div class=\"color-scheme\">\r\n        <div class=\"switch\" :class=\"settingsStore.settings.app.colorScheme\" @click=\"settingsStore.settings.app.colorScheme = settingsStore.settings.app.colorScheme === 'dark' ? 'light' : 'dark'\">\r\n          <el-icon class=\"icon\">\r\n            <svg-icon :name=\"settingsStore.settings.app.colorScheme === 'light' ? 'ep:sunny' : 'ep:moon'\" />\r\n          </el-icon>\r\n        </div>\r\n      </div>\r\n      <el-divider v-if=\"settingsStore.mode === 'pc'\">\r\n        导航栏模式\r\n      </el-divider>\r\n      <div v-if=\"settingsStore.mode === 'pc'\" class=\"menu-mode\">\r\n        <el-tooltip content=\"侧边栏模式（含主导航）\" placement=\"top\" :show-after=\"500\">\r\n          <div class=\"mode mode-side\" :class=\"{ active: settingsStore.settings.menu.menuMode === 'side' }\" @click=\"settingsStore.settings.menu.menuMode = 'side'\">\r\n            <div class=\"mode-container\" />\r\n            <el-icon>\r\n              <svg-icon name=\"ep:check\" />\r\n            </el-icon>\r\n          </div>\r\n        </el-tooltip>\r\n        <el-tooltip content=\"顶部模式\" placement=\"top\" :show-after=\"500\">\r\n          <div class=\"mode mode-head\" :class=\"{ active: settingsStore.settings.menu.menuMode === 'head' }\" @click=\"settingsStore.settings.menu.menuMode = 'head'\">\r\n            <div class=\"mode-container\" />\r\n            <el-icon>\r\n              <svg-icon name=\"ep:check\" />\r\n            </el-icon>\r\n          </div>\r\n        </el-tooltip>\r\n        <el-tooltip content=\"侧边栏模式（不含主导航）\" placement=\"top\" :show-after=\"500\">\r\n          <div class=\"mode mode-single\" :class=\"{ active: settingsStore.settings.menu.menuMode === 'single' }\" @click=\"settingsStore.settings.menu.menuMode = 'single'\">\r\n            <div class=\"mode-container\" />\r\n            <el-icon>\r\n              <svg-icon name=\"ep:check\" />\r\n            </el-icon>\r\n          </div>\r\n        </el-tooltip>\r\n      </div>\r\n      <el-divider>导航栏</el-divider>\r\n      <div class=\"setting-item\">\r\n        <div class=\"label\">\r\n          主导航切换跳转\r\n          <el-tooltip content=\"开启该功能后，切换主导航时，页面自动跳转至该主导航下，次导航里第一个导航\" placement=\"top\">\r\n            <el-icon>\r\n              <svg-icon name=\"ep:question-filled\" />\r\n            </el-icon>\r\n          </el-tooltip>\r\n        </div>\r\n        <el-switch v-model=\"settingsStore.settings.menu.switchMainMenuAndPageJump\" :disabled=\"['single'].includes(settingsStore.settings.menu.menuMode)\" />\r\n      </div>\r\n      <div class=\"setting-item\">\r\n        <div class=\"label\">\r\n          次导航保持展开一个\r\n          <el-tooltip content=\"开启该功能后，次导航只保持单个菜单的展开\" placement=\"top\">\r\n            <el-icon>\r\n              <svg-icon name=\"ep:question-filled\" />\r\n            </el-icon>\r\n          </el-tooltip>\r\n        </div>\r\n        <el-switch v-model=\"settingsStore.settings.menu.subMenuUniqueOpened\" />\r\n      </div>\r\n      <div class=\"setting-item\">\r\n        <div class=\"label\">\r\n          次导航是否折叠\r\n        </div>\r\n        <el-switch v-model=\"settingsStore.settings.menu.subMenuCollapse\" />\r\n      </div>\r\n      <div v-if=\"settingsStore.mode === 'pc'\" class=\"setting-item\">\r\n        <div class=\"label\">\r\n          显示次导航折叠按钮\r\n        </div>\r\n        <el-switch v-model=\"settingsStore.settings.menu.enableSubMenuCollapseButton\" />\r\n      </div>\r\n      <div class=\"setting-item\">\r\n        <div class=\"label\">\r\n          是否启用快捷键\r\n        </div>\r\n        <el-switch v-model=\"settingsStore.settings.menu.enableHotkeys\" :disabled=\"['single'].includes(settingsStore.settings.menu.menuMode)\" />\r\n      </div>\r\n      <el-divider>顶栏</el-divider>\r\n      <div class=\"setting-item\">\r\n        <div class=\"label\">\r\n          模式\r\n        </div>\r\n        <el-radio-group v-model=\"settingsStore.settings.topbar.mode\" size=\"small\">\r\n          <el-radio-button label=\"static\">\r\n            静止\r\n          </el-radio-button>\r\n          <el-radio-button label=\"fixed\">\r\n            固定\r\n          </el-radio-button>\r\n          <el-radio-button label=\"sticky\">\r\n            粘性\r\n          </el-radio-button>\r\n        </el-radio-group>\r\n      </div>\r\n      <el-divider>工具栏</el-divider>\r\n      <div v-if=\"settingsStore.mode === 'pc'\" class=\"setting-item\">\r\n        <div class=\"label\">\r\n          全屏\r\n          <el-tooltip content=\"该功能使用场景极少，用户习惯于通过窗口“最大化”功能来扩大显示区域，以显示更多内容，并且使用 F11 键也可以进入全屏效果\" placement=\"top\">\r\n            <el-icon>\r\n              <svg-icon name=\"ep:question-filled\" />\r\n            </el-icon>\r\n          </el-tooltip>\r\n        </div>\r\n        <el-switch v-model=\"settingsStore.settings.toolbar.enableFullscreen\" />\r\n      </div>\r\n      <div class=\"setting-item\">\r\n        <div class=\"label\">\r\n          页面刷新\r\n          <el-tooltip content=\"开启时会阻止原生 F5 键刷新功能，并采用框架提供的刷新模式进行页面刷新\" placement=\"top\">\r\n            <el-icon>\r\n              <svg-icon name=\"ep:question-filled\" />\r\n            </el-icon>\r\n          </el-tooltip>\r\n        </div>\r\n        <el-switch v-model=\"settingsStore.settings.toolbar.enablePageReload\" />\r\n      </div>\r\n      <div class=\"setting-item\">\r\n        <div class=\"label\">\r\n          颜色主题\r\n          <el-tooltip content=\"开启后可在明亮/暗黑模式中切换\" placement=\"top\">\r\n            <el-icon>\r\n              <svg-icon name=\"ep:question-filled\" />\r\n            </el-icon>\r\n          </el-tooltip>\r\n        </div>\r\n        <el-switch v-model=\"settingsStore.settings.toolbar.enableColorScheme\" />\r\n      </div>\r\n      <el-divider v-if=\"settingsStore.mode === 'pc'\">\r\n        面包屑导航\r\n      </el-divider>\r\n      <div v-if=\"settingsStore.mode === 'pc'\" class=\"setting-item\">\r\n        <div class=\"label\">\r\n          是否启用\r\n        </div>\r\n        <el-switch v-model=\"settingsStore.settings.breadcrumb.enable\" />\r\n      </div>\r\n      <el-divider>导航搜索</el-divider>\r\n      <div class=\"setting-item\">\r\n        <div class=\"label\">\r\n          是否启用\r\n          <el-tooltip content=\"对导航进行快捷搜索\" placement=\"top\">\r\n            <el-icon>\r\n              <svg-icon name=\"ep:question-filled\" />\r\n            </el-icon>\r\n          </el-tooltip>\r\n        </div>\r\n        <el-switch v-model=\"settingsStore.settings.navSearch.enable\" />\r\n      </div>\r\n      <div class=\"setting-item\">\r\n        <div class=\"label\">\r\n          是否启用快捷键\r\n        </div>\r\n        <el-switch v-model=\"settingsStore.settings.navSearch.enableHotkeys\" :disabled=\"!settingsStore.settings.navSearch.enable\" />\r\n      </div>\r\n      <el-divider>底部版权</el-divider>\r\n      <div class=\"setting-item\">\r\n        <div class=\"label\">\r\n          是否启用\r\n        </div>\r\n        <el-switch v-model=\"settingsStore.settings.copyright.enable\" />\r\n      </div>\r\n      <div class=\"setting-item\">\r\n        <div class=\"label\">\r\n          日期\r\n        </div>\r\n        <el-input v-model=\"settingsStore.settings.copyright.dates\" size=\"small\" :disabled=\"!settingsStore.settings.copyright.enable\" />\r\n      </div>\r\n      <div class=\"setting-item\">\r\n        <div class=\"label\">\r\n          公司\r\n        </div>\r\n        <el-input v-model=\"settingsStore.settings.copyright.company\" size=\"small\" :disabled=\"!settingsStore.settings.copyright.enable\" />\r\n      </div>\r\n      <div class=\"setting-item\">\r\n        <div class=\"label\">\r\n          网址\r\n        </div>\r\n        <el-input v-model=\"settingsStore.settings.copyright.website\" size=\"small\" :disabled=\"!settingsStore.settings.copyright.enable\" />\r\n      </div>\r\n      <div class=\"setting-item\">\r\n        <div class=\"label\">\r\n          备案\r\n        </div>\r\n        <el-input v-model=\"settingsStore.settings.copyright.beian\" size=\"small\" :disabled=\"!settingsStore.settings.copyright.enable\" />\r\n      </div>\r\n      <el-divider>主页</el-divider>\r\n      <div class=\"setting-item\">\r\n        <div class=\"label\">\r\n          是否开启\r\n          <el-tooltip content=\"该功能开启时，登录成功默认进入主页，反之则默认进入导航栏里第一个导航页面\" placement=\"top\">\r\n            <el-icon>\r\n              <svg-icon name=\"ep:question-filled\" />\r\n            </el-icon>\r\n          </el-tooltip>\r\n        </div>\r\n        <el-switch v-model=\"settingsStore.settings.home.enable\" />\r\n      </div>\r\n      <div class=\"setting-item\">\r\n        <div class=\"label\">\r\n          主页名称\r\n        </div>\r\n        <el-input v-model=\"settingsStore.settings.home.title\" size=\"small\" />\r\n      </div>\r\n      <el-divider>其它</el-divider>\r\n      <div class=\"setting-item\">\r\n        <div class=\"label\">\r\n          组件尺寸\r\n          <el-tooltip content=\"全局设置 Element Plus 组件的默认尺寸大小\" placement=\"top\">\r\n            <el-icon>\r\n              <svg-icon name=\"ep:question-filled\" />\r\n            </el-icon>\r\n          </el-tooltip>\r\n        </div>\r\n        <el-radio-group v-model=\"settingsStore.settings.app.elementSize\" size=\"small\">\r\n          <el-radio-button label=\"large\">\r\n            较大\r\n          </el-radio-button>\r\n          <el-radio-button label=\"default\">\r\n            默认\r\n          </el-radio-button>\r\n          <el-radio-button label=\"small\">\r\n            稍小\r\n          </el-radio-button>\r\n        </el-radio-group>\r\n      </div>\r\n      <div class=\"setting-item\">\r\n        <div class=\"label\">\r\n          是否启用权限\r\n        </div>\r\n        <el-switch v-model=\"settingsStore.settings.app.enablePermission\" />\r\n      </div>\r\n      <div class=\"setting-item\">\r\n        <div class=\"label\">\r\n          载入进度条\r\n          <el-tooltip content=\"该功能开启时，跳转路由会看到页面顶部有进度条\" placement=\"top\">\r\n            <el-icon>\r\n              <svg-icon name=\"ep:question-filled\" />\r\n            </el-icon>\r\n          </el-tooltip>\r\n        </div>\r\n        <el-switch v-model=\"settingsStore.settings.app.enableProgress\" />\r\n      </div>\r\n      <div class=\"setting-item\">\r\n        <div class=\"label\">\r\n          动态标题\r\n          <el-tooltip content=\"该功能开启时，页面标题会显示当前路由标题，格式为“页面标题 - 网站名称”；关闭时则显示网站名称，网站名称在项目根目录下 .env.* 文件里配置\" placement=\"top\">\r\n            <el-icon>\r\n              <svg-icon name=\"ep:question-filled\" />\r\n            </el-icon>\r\n          </el-tooltip>\r\n        </div>\r\n        <el-switch v-model=\"settingsStore.settings.app.enableDynamicTitle\" />\r\n      </div>\r\n      <template v-if=\"isSupported\" #footer>\r\n        <el-button type=\"primary\" @click=\"handleCopy\">\r\n          <template #icon>\r\n            <el-icon>\r\n              <svg-icon name=\"ep:document-copy\" />\r\n            </el-icon>\r\n          </template>\r\n          复制配置\r\n        </el-button>\r\n      </template>\r\n    </el-drawer>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n:deep(.el-drawer__header) {\r\n  margin-bottom: initial;\r\n  padding-bottom: 20px;\r\n  border-bottom: 1px solid var(--el-border-color);\r\n}\r\n\r\n:deep(.el-drawer__footer) {\r\n  padding: 20px;\r\n  border-top: 1px solid var(--el-border-color);\r\n  transition: var(--el-transition-border);\r\n\r\n  .el-button {\r\n    width: 100%;\r\n  }\r\n}\r\n\r\n:deep(.el-divider) {\r\n  margin: 36px 0 24px;\r\n}\r\n\r\n.color-scheme {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding-bottom: 10px;\r\n\r\n  $width: 50px;\r\n\r\n  .switch {\r\n    width: $width;\r\n    height: 30px;\r\n    border-radius: 15px;\r\n    cursor: pointer;\r\n    background-color: var(--el-fill-color-darker);\r\n    transition: background-color 0.3s;\r\n\r\n    &.dark {\r\n      .icon {\r\n        margin-left: calc($width - 24px - 3px);\r\n      }\r\n    }\r\n\r\n    .icon {\r\n      margin: 3px;\r\n      padding: 5px;\r\n      font-size: 24px;\r\n      border-radius: 50%;\r\n      background-color: var(--el-fill-color-lighter);\r\n      transition: margin-left 0.3s, background-color 0.3s;\r\n    }\r\n  }\r\n}\r\n\r\n.menu-mode {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding-bottom: 10px;\r\n\r\n  .mode {\r\n    position: relative;\r\n    width: 80px;\r\n    height: 55px;\r\n    margin: 10px;\r\n    border-radius: 5px;\r\n    overflow: hidden;\r\n    cursor: pointer;\r\n    background-color: var(--g-app-bg);\r\n    box-shadow: 0 0 5px 1px var(--el-border-color-lighter);\r\n    transition: 0.2s;\r\n\r\n    &:hover {\r\n      box-shadow: 0 0 5px 1px var(--el-border-color-darker);\r\n    }\r\n\r\n    &.active {\r\n      box-shadow: 0 0 0 2px var(--el-color-primary);\r\n    }\r\n\r\n    &::before,\r\n    &::after,\r\n    .mode-container {\r\n      pointer-events: none;\r\n      position: absolute;\r\n      border-radius: 3px;\r\n    }\r\n\r\n    .mode-container::before {\r\n      content: \"\";\r\n      position: absolute;\r\n      width: 100%;\r\n      height: 100%;\r\n      background-color: var(--g-sub-sidebar-menu-active-bg);\r\n      opacity: 0.2;\r\n    }\r\n\r\n    &-side {\r\n      &::before {\r\n        content: \"\";\r\n        top: 5px;\r\n        left: 5px;\r\n        bottom: 5px;\r\n        width: 10px;\r\n        background-color: var(--g-sub-sidebar-menu-active-bg);\r\n      }\r\n\r\n      &::after {\r\n        content: \"\";\r\n        top: 5px;\r\n        left: 20px;\r\n        bottom: 5px;\r\n        width: 15px;\r\n        background-color: var(--g-sub-sidebar-menu-active-bg);\r\n        opacity: 0.5;\r\n      }\r\n\r\n      .mode-container {\r\n        top: 5px;\r\n        left: 40px;\r\n        right: 5px;\r\n        bottom: 5px;\r\n        border: 1px dashed var(--g-sub-sidebar-menu-active-bg);\r\n      }\r\n    }\r\n\r\n    &-head {\r\n      &::before {\r\n        content: \"\";\r\n        top: 5px;\r\n        left: 5px;\r\n        right: 5px;\r\n        height: 10px;\r\n        background-color: var(--g-sub-sidebar-menu-active-bg);\r\n      }\r\n\r\n      &::after {\r\n        content: \"\";\r\n        top: 20px;\r\n        left: 5px;\r\n        bottom: 5px;\r\n        width: 15px;\r\n        background-color: var(--g-sub-sidebar-menu-active-bg);\r\n        opacity: 0.5;\r\n      }\r\n\r\n      .mode-container {\r\n        top: 20px;\r\n        left: 25px;\r\n        right: 5px;\r\n        bottom: 5px;\r\n        border: 1px dashed var(--g-sub-sidebar-menu-active-bg);\r\n      }\r\n    }\r\n\r\n    &-single {\r\n      &::before {\r\n        content: \"\";\r\n        position: absolute;\r\n        top: 5px;\r\n        left: 5px;\r\n        bottom: 5px;\r\n        width: 15px;\r\n        background-color: var(--g-sub-sidebar-menu-active-bg);\r\n        opacity: 0.5;\r\n      }\r\n\r\n      .mode-container {\r\n        top: 5px;\r\n        left: 25px;\r\n        right: 5px;\r\n        bottom: 5px;\r\n        border: 1px dashed var(--g-sub-sidebar-menu-active-bg);\r\n      }\r\n    }\r\n\r\n    i {\r\n      position: absolute;\r\n      right: 10px;\r\n      bottom: 10px;\r\n      display: none;\r\n    }\r\n\r\n    &.active i {\r\n      display: block;\r\n      color: var(--el-color-primary);\r\n    }\r\n  }\r\n}\r\n\r\n.setting-item {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin: 5px 0;\r\n  padding: 5px 10px;\r\n  border-radius: 5px;\r\n  transition: all 0.3s;\r\n\r\n  &:hover {\r\n    background: var(--el-fill-color);\r\n  }\r\n\r\n  .label {\r\n    font-size: 14px;\r\n    color: var(--el-text-color-regular);\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    i {\r\n      margin-left: 4px;\r\n      font-size: 17px;\r\n      color: var(--el-color-warning);\r\n      cursor: help;\r\n    }\r\n  }\r\n\r\n  .el-switch {\r\n    height: auto;\r\n  }\r\n\r\n  .el-input {\r\n    width: 150px;\r\n  }\r\n}\r\n</style>\r\n"],"names":["__default__","defineComponent","route","useRoute","settingsStore","useSettingsStore","menuStore","useMenuStore","isShow","ref","watch","value","onMounted","eventBus","copy","copied","isSupported","useClipboard","val","ElMessage","handleCopy"],"mappings":"wzEAEAA,GAAAC,EAAA,CAA+B,KAAA,YAE/B,CAAA,uBASA,MAAAC,EAAAC,IAEAC,EAAAC,IACAC,EAAAC,IAEAC,EAAAC,EAAA,EAAA,EAEAC,EAAA,IAAAN,EAAA,SAAA,KAAA,SAAAO,GAAA,CACEA,IAAA,SACEL,EAAA,WAAA,CAAA,EAGAA,EAAA,WAAAJ,EAAA,QAAA,CACF,CAAA,EAGFU,EAAA,IAAA,CACEC,EAAA,GAAA,sBAAA,IAAA,CACEL,EAAA,MAAA,CAAAA,EAAA,KAAuB,CAAA,CACxB,CAAA,EAGH,KAAA,CAAA,KAAAM,EAAA,OAAAC,EAAA,YAAAC,CAAA,EAAAC,EAAA,EAEAP,EAAAK,EAAAG,GAAA,CACEA,GACEC,EAAA,QAAA,gCAAA,CACF,CAAA,EAGF,SAAAC,GAAA,CACEN,EAAA,KAAA,UAAAV,EAAA,SAAA,KAAA,CAAA,CAAA,CAAoD"}